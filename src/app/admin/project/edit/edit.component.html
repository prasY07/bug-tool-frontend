<div class="row mt-5 card">
  <div class="card-header">Add New Project</div>
  <form class="p-3" [formGroup]="form" (ngSubmit)="onSubmit()">
    <div class="row">
      <div class="form-group col-6">
        <label>Name</label>
        <input
          type="text"
          formControlName="name"
          class="form-control"
          placeholder="Project Name"
        />
        <small
          *ngIf="form.get('name')?.invalid && form.get('name')?.touched"
          class="text-danger"
        >
          <span *ngIf="form.get('name')?.errors?.['required']"
            >Name is required.</span
          >
          <span *ngIf="form.get('name')?.errors?.['maxlength']"
            >Name cannot be more than 15 characters long.</span
          >
          <span *ngIf="form.get('name')?.errors?.['minlength']"
            >Name must be at least 5 characters long.</span
          >
        </small>
      </div>

      <div class="form-group mt-2 col-6">
        <label>Description</label>
        <textarea
          formControlName="description"
          class="form-control"
          placeholder="Project Description"
        ></textarea>
        <small
          *ngIf="
            form.get('description')?.invalid && form.get('description')?.touched
          "
          class="text-danger"
        >
          <span *ngIf="form.get('description')?.errors?.['required']"
            >Description is required.</span
          >
          <span *ngIf="form.get('description')?.errors?.['maxlength']"
            >Description cannot be more than 500 characters long.</span
          >
          <span *ngIf="form.get('description')?.errors?.['minlength']"
            >Description must be at least 10 characters long.</span
          >
        </small>
      </div>

      <div class="form-group mt-2 col-6">
        <label>Deadline Date</label>
        <input
          type="date"
          formControlName="deadline_date"
          class="form-control"
        />
        <small
          *ngIf="
            form.get('deadline_date')?.invalid &&
            form.get('deadline_date')?.touched
          "
          class="text-danger"
        >
          <span *ngIf="form.get('deadline_date')?.errors?.['required']"
            >Date is required.</span
          >
        </small>
      </div>
      <div class="form-group mt-2 col-6">
        <label>Users</label>

        <ng-multiselect-dropdown
        [placeholder]="'Users'"
        [settings]="dropdownSettings"
        [data]="dropdownList"
        [(ngModel)]="selectedItems"
        formControlName="selectedUsers"
        >
        </ng-multiselect-dropdown>


      </div>
    </div>

    <div>
      <button
        type="submit"
        class="btn btn-primary mt-2"
        style="margin: 0 auto; display: block"
        [disabled]="isLoading || form.pristine || form.invalid"
      >
        <ng-container *ngIf="!isLoading">Submit</ng-container>
        <ng-container *ngIf="isLoading">
          <div class="spinner"></div>
        </ng-container>
      </button>
    </div>
  </form>
</div>
